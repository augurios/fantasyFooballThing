/*!
 * Start Bootstrap - SB Admin v5.0.1 (https://startbootstrap.com/template-overviews/sb-admin)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin/blob/master/LICENSE)
 */

!function(b){var n,l=function(l,r){console.log("init data:",l,r);var t=b(".team-selector"),s=b(".team-a .team-selector"),m=b(".team-b .team-selector"),c=b(".team-a .image img"),g=b(".team-b .image img"),i=function(e){for(var a=0,t=r.length;a<t;a++)if(r[a].name===e)return r[a];return null};b.each(r,function(e,a){t.append(b("<option>",{value:a.name,text:a.fantasyname+" ("+a.name+")"}))}),t.change(function(){var e=[],a=i(s.val()),t=i(m.val()),r=[],o=[];if(b("#dataTable tbody").empty(),s.val()&&m.val()){console.log("team match enabled"),c.attr("src",a.image),g.attr("src",t.image);for(var n=0;n<l.length;n++)l[n].team_a[0].owner!==s.val()&&l[n].team_a[0].owner!==m.val()||l[n].team_b[0].owner!==s.val()&&l[n].team_b[0].owner!==m.val()||e.push(l[n]);b.each(e,function(e,a){var t="<tr><td>"+a.team_a[0].name+" "+a.team_a[0].score+" | "+a.team_b[0].name+" "+a.team_b[0].score+"</td></tr>";b("#tblEntAttributes tbody").append(t),b("#dataTable tbody").append(t)});for(n=0;n<e.length;n++)e[n].team_a[0].owner===s.val()&&parseInt(e[n].team_a[0].score)>parseInt(e[n].team_b[0].score)||e[n].team_b[0].owner===s.val()&&parseInt(e[n].team_b[0].score)>parseInt(e[n].team_a[0].score)?r.push(e[n]):(e[n].team_a[0].owner===m.val()&&parseInt(e[n].team_a[0].score)>parseInt(e[n].team_b[0].score)||e[n].team_b[0].owner===m.val()&&parseInt(e[n].team_b[0].score)>parseInt(e[n].team_a[0].score))&&o.push(e[n]);b(".team-a .record .wins-record").text(r.length),b(".team-a .record .loss-record").text(o.length),b(".team-b .record .wins-record").text(o.length),b(".team-b .record .loss-record").text(r.length),console.log(e,r,o)}else console.log("team match disabled")})};console.log("fetching!"),b.getJSON("data/schedule.json",function(e){console.log("fetch result",e),n=e.years;for(var a=[],t=0;t<n.length;t++)for(var r=n[t].link.split("/")[6],o=0;o<n[t].games.length;o++)n[t].games[o].week+=" - "+r,a.push(n[t].games[o]);l(a,e.owners)}).fail(function(e,a,t){console.log("error",a,t)}),b("#dataTable").DataTable()}(jQuery);