/*!
 * Start Bootstrap - SB Admin v5.0.1 (https://startbootstrap.com/template-overviews/sb-admin)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-sb-admin/blob/master/LICENSE)
 */

!function(b){var r,l=function(l,n){console.log("init data:",l,n);var t=b(".team-selector"),s=b(".team-a .team-selector"),m=b(".team-b .team-selector"),c=b(".team-a .image img"),g=b(".team-b .image img"),i=function(e){for(var a=0,t=n.length;a<t;a++)if(n[a].name===e)return n[a];return null};b.each(n,function(e,a){t.append(b("<option>",{value:a.name,text:a.name}))}),t.change(function(){var e=[],a=i(s.val()),t=i(m.val()),n=[],o=[];if(b("#dataTable tbody").empty(),s.val()&&m.val()){console.log("team match enabled"),c.attr("src",a.image),g.attr("src",t.image);for(var r=0;r<l.length;r++)l[r].team_a[0].owner!==s.val()&&l[r].team_a[0].owner!==m.val()||l[r].team_b[0].owner!==s.val()&&l[r].team_b[0].owner!==m.val()||e.push(l[r]);b.each(e,function(e,a){var t="<tr><td>"+a.team_a[0].name+" "+a.team_a[0].score+" | "+a.team_b[0].name+" "+a.team_b[0].score+"</td></tr>";b("#tblEntAttributes tbody").append(t),b("#dataTable tbody").append(t)}),b(".score span").text("/"+e.length);for(r=0;r<e.length;r++)e[r].team_a[0].owner===s.val()&&parseInt(e[r].team_a[0].score)>parseInt(e[r].team_b[0].score)||e[r].team_b[0].owner===s.val()&&parseInt(e[r].team_b[0].score)>parseInt(e[r].team_a[0].score)?n.push(e[r]):(e[r].team_a[0].owner===m.val()&&parseInt(e[r].team_a[0].score)>parseInt(e[r].team_b[0].score)||e[r].team_b[0].owner===m.val()&&parseInt(e[r].team_b[0].score)>parseInt(e[r].team_a[0].score))&&o.push(e[r]);b(".team-a .score strong").text(n.length),b(".team-b .score strong").text(o.length),console.log(e,n,o)}else console.log("team match disabled")})};console.log("fetching!"),b.getJSON("data/schedule.json",function(e){console.log("fetch result",e),r=e.years;for(var a=[],t=0;t<r.length;t++)for(var n=r[t].link.split("/")[6],o=0;o<r[t].games.length;o++)r[t].games[o].week+=" - "+n,a.push(r[t].games[o]);l(a,e.owners)}).fail(function(e,a,t){console.log("error",a,t)}),b("#dataTable").DataTable()}(jQuery);